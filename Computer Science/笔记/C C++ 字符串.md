# C C++ 字符串相关

## C

如果C语言中使用字符串char*及其有关功能，需要包含头文件string.h。

使用字符串可以有两种形式，一种是使用字符数组char []，字符数组中对字符串的最大长度做出了规定（即数组的大小）。

另一种形式是使用字符指针char*，字符指针使用需要特别注意，很多错误的根源都是来自于字符指针。

### char*的初始化

由于char* 本身就是一个指针，因此声明一个char* 类型的变量的时候，只是为这个指针分配了内存空间，而该指针实际指向的内存区域仍然是未定义的。需要使用malloc函数为其分配空间。

如果要使用char* 来获取一些函数的返回值，将其指向函数返回的内存空间，则直接置空值：

```C
char *temp = 0x0;       // 警告：必须清楚在下面代码中temp必定会被改变指向的内存空间才能使用
```

实际上可以直接声明即可，不过一定要保证在下面的代码中temp被改变指向的内存空间。

如果要初始化char* 来存放字符串，则需要为其分配内存空间：

```C
char *temp = (char*)malloc(sizeof(char) * size);
```

## C++

不考虑代码占用内存空间以及速度等的情况下，尽量使用STL string。
