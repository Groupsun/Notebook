# Re-order buffer

一个重排序缓冲区（Re-order buffer, ROB）在用于乱序执行的Tomasulo算法中使用。它允许指令乱序执行，并且按照原有顺序提交。

一般来说，指令有三个阶段：发射（Issue）、执行（Execute）以及写回（Write result）。在Tomasulo算法当中，增加了一个额外的阶段称为提交（Commit）。在这个阶段当中，指令执行的结果会被写入寄存器或者存储器当中。在写回阶段，结果只是被写入了重排序缓冲区当中。重排序缓冲区中的数据可以被之后依赖于这些数据的指令（数据冒险）使用。

缓冲区中的条目还有一些额外的域：

- 指令类型（跳转、存储、写寄存器）
- 目标（存储器还是寄存器数）
- 结果（写入存储器或者寄存器中的值还是跳转是否成功的标志）
- 有效性（结果是否还有效）

重排序缓冲区的其他好处包括精确的异常处理和简易的目标地址预测失败的回滚。ROB按照指令被读取的顺序存储。当跳转的预测出错或者一个非预期的异常发生的时候，ROB会清空所有的指令并且重新初始化保留站（Reservation station）。
